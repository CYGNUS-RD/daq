<!DOCTYPE html>
<html class="mcss" lang="en">

<head>
<meta charset="UTF-8">
<link rel="stylesheet" href="midas.css">
<script src="controls.js"></script>
<script src="midas.js"></script>
<script src="mhttpd.js"></script>
<script src="mhistory.js"></script>

<style>

.mydiv {
cursor: pointer;
color:#0000FF;
}
.mydiv:link { color:#0000FF; text-decoration:none }
.mydiv:visited { color:#800080; text-decoration:none }
.mydiv:hover { color:#0000FF; text-decoration:underline }
.mydiv:active { color:#0000FF; text-decoration:underline }
.mydiv:focus { color:#0000FF; text-decoration:none; }

input[type=number] {
   font-size: 100%;
}

input[type=number][disabled]{color:transparent; background-color:transparent; border-width: 0px;}

</style>

<script>

window.onload = function() {

  mhttpd_init('Trigger');
  mhistory_init();

}

function setEXT(){
  
  ext = [1, 1, 1, 1, 2, 1, 2, 1]
  
  var paths = ["/Equipment/TriggerModule/Settings/TriggerModuleConfigReg[0-7]"];
  mjsonrpc_db_paste(paths,[ext]).then(function(rpc) {
  }).catch(function(error) {
          mjsonrpc_error_alert(error);
  });  
}
    
function setClock5(){
  
  clock5 = [15, 1, 1, 2, 3, 0, 2, 1]
  
  var paths = ["/Equipment/TriggerModule/Settings/TriggerModuleConfigReg[0-7]"];
  mjsonrpc_db_paste(paths,[clock1]).then(function(rpc) {
  }).catch(function(error) {
          mjsonrpc_error_alert(error);
  });
}
    
function setClock10(){
  
  clock10 = [15, 1, 1, 2, 3, 1, 2, 1]

  var paths = ["/Equipment/TriggerModule/Settings/TriggerModuleConfigReg[0-7]"];
  mjsonrpc_db_paste(paths,[clock10]).then(function(rpc) {
  }).catch(function(error) {
          mjsonrpc_error_alert(error);
  });
}



function setMajority2(){

  m2 = [15, 1, 1, 2, 2, 1, 2, 1]
  
  var paths = ["/Equipment/TriggerModule/Settings/TriggerModuleConfigReg[0-7]"];
  mjsonrpc_db_paste(paths,[m2]).then(function(rpc) {
  }).catch(function(error) {
          mjsonrpc_error_alert(error);
  });  
}

function setMajority3(){

  m3 = [255, 255, 1, 3, 3, 0, 0, 0]
  
  var paths = ["/Equipment/TriggerModule/Settings/TriggerModuleConfigReg[0-7]"];
  mjsonrpc_db_paste(paths,[m3]).then(function(rpc) {
  }).catch(function(error) {
          mjsonrpc_error_alert(error);
  });  
}


</script>


<title>TRIGGER MODULE</title>

<style>
.mtable td {
padding: 8px;
}
</style>

</head>

<body class="mcss">

  <div id="mheader"></div>
  <div id="msidenav"></div>

  <div id="mmain">
    <table class="mtable" style="font-size:18px">
    <tr>
    	<th class="mtableheader" id="page_title" colspan="2">Trigger Module Control Page<th/>
    </tr>
    <tr>
    	<td style="vertical-align:center">	  
	    <table class="mtable">
	      <tr>
		<th class="mtableheader" id="register_table" colspan="3"> Registers configuration</th>
	      </tr>
	      <tr>
		<th>Register</th><th>Value</th>
	      </tr>

	      <tr>
		<td>Masks</td>
		<td align="right"><div class="modbvalue" data-odb-path="/Equipment/TriggerModule/Settings/TriggerModuleConfigReg[0]" data-odb-editable = "1" id="R1"></div> </td>
	      </tr>
	      <tr>
		<td>AND mask</td>
		<td align="right"><div class="modbvalue" data-odb-path="/Equipment/TriggerModule/Settings/TriggerModuleConfigReg[1]" data-odb-editable = "1" id="R2"></div> </td>
	      </tr>
	      <tr>
		<td>OR mask</td>
		<td align="right"><div class="modbvalue" data-odb-path="/Equipment/TriggerModule/Settings/TriggerModuleConfigReg[2]" data-odb-editable = "1" id="R3"></div> </td>
	      </tr>
	      <tr>
		<td>Majority</td>
		<td align="right"><div class="modbvalue" data-odb-path="/Equipment/TriggerModule/Settings/TriggerModuleConfigReg[3]" data-odb-editable = "1" id="R4"></div> </td>
	      </tr>
	      <tr>
		<td>OUTMUX</td>
		<td align="right"><div class="modbvalue" data-odb-path="/Equipment/TriggerModule/Settings/TriggerModuleConfigReg[4]" data-odb-editable = "1" id="R5"></div> </td>
	      </tr>
	      <tr>
		<td>Divider</td>
		<td align="right"><div class="modbvalue" data-odb-path="/Equipment/TriggerModule/Settings/TriggerModuleConfigReg[5]" data-odb-editable = "1" id="R6"></div> </td>
	      </tr>
	      <tr>
		<td>Counter</td>
		<td align="right"><div class="modbvalue" data-odb-path="/Equipment/TriggerModule/Settings/TriggerModuleConfigReg[6]" data-odb-editable = "1" id="R7"></div> </td>
	      </tr>
	      <tr>
		<td>Reg8</td>
		<td align="right"><div class="modbvalue" data-odb-path="/Equipment/TriggerModule/Settings/TriggerModuleConfigReg[7]" data-odb-editable = "1" id="R8"></div> </td>
	      </tr>
	    </table>
	</td>
	
	<td style="vertical-align:top">
	    <table class="mtable" style="font-size:18px">
	      <tr>
		<th class="mtableheader" id="buttons_table" colspan="3">Preset Configurations</th>
	      </tr>
	      	  <tr height="55" colspan=3 align="center"><td><input class="mbutton" id="mbutton" type="button" value="EXT" onclick="setEXT()" style="padding: 7px 20px;font-size:18px;margin:5px"/></td></tr>
	      	  <tr height="55" colspan=3 align="center"><td><input class="mbutton" id="mbutton" type="button" value="Clock 5Hz" onclick="setClock5()" style="padding: 7px 20px;font-size:18px;margin:5px"/></td></tr>
              <tr height="55" colspan=3 align="center"><td><input class="mbutton" id="mbutton" type="button" value="Clock 10Hz" onclick="setClock10()" style="padding: 7px 20px;font-size:18px;margin:5px"/></td></tr>
              <tr height="55" colspan=3 align="center"><td><input class="mbutton" id="mbutton" type="button" value="Majority2" onclick="setMajority2()" style="padding: 7px 20px;font-size:18px;margin:5px"/></td></tr>
<!--              <tr height="55" colspan=3 align="center"><td><input class="mbutton" id="mbutton" type="button" value="Majority2" onclick="setMajority2()" style="padding: 7px 20px;font-size:18px;margin:5px"/></td></tr>-->

	      </table>
	      
	</td>
      
    
  </div>


</body>
</html>
